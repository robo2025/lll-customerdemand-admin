webpackJsonp([36],{1347:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getDemandDetail=t.deleteDemands=t.deleteDemand=t.checkDemand=t.queryAllDemands=void 0;var r=a(81),u=n(r),s=a(196),d=n(s),c=(t.queryAllDemands=function(){var e=(0,d.default)(u.default.mark(function e(t,a){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.default.get("access_token"),e.abrupt("return",(0,l.default)(f.URL1+"/operation/reqs?offset="+t+"&limit="+a,{headers:{Authorization:n}}));case 2:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),t.checkDemand=function(){var e=(0,d.default)(u.default.mark(function e(t,a){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.default.get("access_token"),e.abrupt("return",(0,l.default)(f.URL1+"/operation/reqs/"+t+"/audit_status",{method:"put",headers:{Authorization:n},data:{status:a}}));case 2:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),t.deleteDemand=function(){var e=(0,d.default)(u.default.mark(function e(t){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.default.get("access_token"),e.abrupt("return",(0,l.default)(f.URL1+"/operation/reqs/"+t,{method:"delete",headers:{Authorization:a}}));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.deleteDemands=function(){var e=(0,d.default)(u.default.mark(function e(t){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.default.get("access_token"),e.abrupt("return",(0,l.default)(f.URL1+"/operation/reqs",{method:"delete",headers:{Authorization:a},data:{ids:t}}));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.getDemandDetail=function(){var e=(0,d.default)(u.default.mark(function e(t){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.default.get("access_token"),e.abrupt("return",(0,l.default)(f.URL1+"/operation/reqs/"+t,{method:"get",headers:{Authorization:a}}));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a(128)),o=n(c),i=a(321),l=n(i),f=a(127)},743:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(3),u=n(r),s=a(81),d=n(s),c=a(1347);t.default={namespace:"demand",state:{list:[],loading:!1,detail:{},offset:0,total:0,limit:10},effects:{fetch:d.default.mark(function e(t,a){var n,r=t.offset,u=t.limit,s=a.call,o=a.put;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({type:"changeLoading",payload:!0});case 2:return e.next=4,s(c.queryAllDemands,r,u);case 4:return n=e.sent,e.next=7,o({type:"saveAll",payload:n});case 7:return e.next=9,o({type:"changeLoading",payload:!1});case 9:case"end":return e.stop()}},e,this)}),fetchDemandDetail:d.default.mark(function e(t,a){var n,r=t.reqId,u=a.call,s=a.put;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({type:"changeLoading",payload:!0});case 2:return e.next=4,u(c.getDemandDetail,r);case 4:return n=e.sent,e.next=7,s({type:"saveDetail",payload:n.data});case 7:return e.next=9,s({type:"changeLoading",payload:!1});case 9:case"end":return e.stop()}},e,this)}),setDemandStatus:d.default.mark(function e(t,a){var n,r=t.reqId,u=t.status,s=a.call,o=a.put;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({type:"changeLoading",payload:!0});case 2:return e.next=4,s(c.checkDemand,r,u);case 4:return n=e.sent,e.next=7,o({type:"changeStatus",reqId:r,status:u});case 7:return e.next=9,o({type:"changeLoading",payload:!1});case 9:case"end":return e.stop()}},e,this)}),setDetailStatus:d.default.mark(function e(t,a){var n,r=t.reqId,u=t.status,s=a.call,o=a.put;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({type:"changeLoading",payload:!0});case 2:return e.next=4,s(c.checkDemand,r,u);case 4:return n=e.sent,e.next=7,o({type:"changeStatus2",reqId:r,status:u});case 7:return e.next=9,o({type:"changeLoading",payload:!1});case 9:case"end":return e.stop()}},e,this)}),removeDemand:d.default.mark(function e(t,a){var n,r=t.reqId,u=a.call,s=a.put;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({type:"changeLoading",payload:!0});case 2:return e.next=4,u(c.deleteDemand,r);case 4:return n=e.sent,e.next=7,s({type:"remove",reqId:r});case 7:return e.next=9,s({type:"changeLoading",payload:!1});case 9:case"end":return e.stop()}},e,this)}),removeDemands:d.default.mark(function e(t,a){var n,r=t.reqIdArr,u=a.call,s=a.put;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({type:"changeLoading",payload:!0});case 2:return e.next=4,u(c.deleteDemands,r);case 4:return n=e.sent,e.next=7,s({type:"removes",reqIds:r});case 7:return e.next=9,s({type:"changeLoading",payload:!1});case 9:case"end":return e.stop()}},e,this)})},reducers:{saveAll:function(e,t){return(0,u.default)({},e,{list:t.payload.data,total:t.payload.headers["x-content-total"]>>0,offset:t.offset>>0,limit:t.limit>>0})},saveDetail:function(e,t){return(0,u.default)({},e,{detail:t.payload})},changeStatus:function(e,t){return(0,u.default)({},e,{list:e.list.map(function(e){return e.id===t.reqId>>0?(e.status=t.status,e):e})})},changeStatus2:function(e,t){return(0,u.default)({},e,{detail:(0,u.default)({},e.detail,{req:(0,u.default)({},e.detail.req,{status:t.status})})})},remove:function(e,t){return(0,u.default)({},e,{list:e.list.map(function(e){return e.id!==t.reqId>>0})})},removes:function(e,t){return(0,u.default)({},e)},changeLoading:function(e,t){return(0,u.default)({},e,{loading:t.payload})}}},e.exports=t.default}});